var er=Object.defineProperty;var tr=(s,e,t)=>e in s?er(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var dn=(s,e,t)=>(tr(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function W(){}function ys(s){return s()}function Gn(){return Object.create(null)}function qe(s){s.forEach(ys)}function bs(s){return typeof s=="function"}function be(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function nr(s){return Object.keys(s).length===0}function R(s,e){s.appendChild(e)}function Ce(s,e,t){s.insertBefore(e,t||null)}function ge(s){s.parentNode&&s.parentNode.removeChild(s)}function M(s){return document.createElement(s)}function Mn(s){return document.createTextNode(s)}function Z(){return Mn(" ")}function sr(){return Mn("")}function fn(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function P(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function rr(s){return Array.from(s.childNodes)}function Zn(s,e){s.value=e??""}function dt(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Fe(s,e,t){s.classList.toggle(e,!!t)}function ar(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}let at;function nt(s){at=s}function On(){if(!at)throw new Error("Function called outside component initialization");return at}function ir(s){On().$$.on_mount.push(s)}function or(s){On().$$.after_update.push(s)}function lr(){const s=On();return(e,t,{cancelable:n=!1}={})=>{const r=s.$$.callbacks[e];if(r){const a=ar(e,t,{cancelable:n});return r.slice().forEach(i=>{i.call(s,a)}),!a.defaultPrevented}return!0}}const Me=[],Kn=[];let Be=[];const Yn=[],cr=Promise.resolve();let bn=!1;function ur(){bn||(bn=!0,cr.then(Cs))}function Cn(s){Be.push(s)}const mn=new Set;let Ie=0;function Cs(){if(Ie!==0)return;const s=at;do{try{for(;Ie<Me.length;){const e=Me[Ie];Ie++,nt(e),hr(e.$$)}}catch(e){throw Me.length=0,Ie=0,e}for(nt(null),Me.length=0,Ie=0;Kn.length;)Kn.pop()();for(let e=0;e<Be.length;e+=1){const t=Be[e];mn.has(t)||(mn.add(t),t())}Be.length=0}while(Me.length);for(;Yn.length;)Yn.pop()();bn=!1,mn.clear(),nt(s)}function hr(s){if(s.fragment!==null){s.update(),qe(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Cn)}}function dr(s){const e=[],t=[];Be.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Be=e}const wt=new Set;let Ee;function fr(){Ee={r:0,c:[],p:Ee}}function mr(){Ee.r||qe(Ee.c),Ee=Ee.p}function ce(s,e){s&&s.i&&(wt.delete(s),s.i(e))}function ye(s,e,t,n){if(s&&s.o){if(wt.has(s))return;wt.add(s),Ee.c.push(()=>{wt.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Oe(s){s&&s.c()}function Ae(s,e,t){const{fragment:n,after_update:r}=s.$$;n&&n.m(e,t),Cn(()=>{const a=s.$$.on_mount.map(ys).filter(bs);s.$$.on_destroy?s.$$.on_destroy.push(...a):qe(a),s.$$.on_mount=[]}),r.forEach(Cn)}function Se(s,e){const t=s.$$;t.fragment!==null&&(dr(t.after_update),qe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gr(s,e){s.$$.dirty[0]===-1&&(Me.push(s),ur(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Re(s,e,t,n,r,a,i=null,o=[-1]){const f=at;nt(s);const g=s.$$={fragment:null,ctx:[],props:a,update:W,not_equal:r,bound:Gn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Gn(),dirty:o,skip_bound:!1,root:e.target||f.$$.root};i&&i(g.root);let b=!1;if(g.ctx=t?t(s,e.props||{},(S,x,...C)=>{const w=C.length?C[0]:x;return g.ctx&&r(g.ctx[S],g.ctx[S]=w)&&(!g.skip_bound&&g.bound[S]&&g.bound[S](w),b&&gr(s,S)),x}):[],g.update(),b=!0,qe(g.before_update),g.fragment=n?n(g.ctx):!1,e.target){if(e.hydrate){const S=rr(e.target);g.fragment&&g.fragment.l(S),S.forEach(ge)}else g.fragment&&g.fragment.c();e.intro&&ce(s.$$.fragment),Ae(s,e.target,e.anchor),Cs()}nt(f)}class ke{constructor(){dn(this,"$$");dn(this,"$$set")}$destroy(){Se(this,1),this.$destroy=W}$on(e,t){if(!bs(t))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!nr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pr);const Te="4.47.1";let Qn=!1,st,vs,As,vn,Ss,xs,Es,Ps,$s;function wr(s,e={auto:!1}){if(Qn)throw new Error(`you must \`import 'openai/shims/${s.kind}'\` before importing anything else from openai`);if(st)throw new Error(`can't \`import 'openai/shims/${s.kind}'\` after \`import 'openai/shims/${st}'\``);Qn=e.auto,st=s.kind,vs=s.fetch,As=s.FormData,vn=s.File,Ss=s.ReadableStream,xs=s.getMultipartRequestOptions,Es=s.getDefaultAgent,Ps=s.fileFromPath,$s=s.isFsReadStream}class _r{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function yr({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,r,a;try{t=fetch,n=Request,r=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:r,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new _r(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}st||wr(yr(),{auto:!0});class k extends Error{}class U extends k{constructor(e,t,n,r){super(`${U.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"];const a=t;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new an({cause:Sn(t)});const a=t==null?void 0:t.error;return e===400?new Rs(e,a,n,r):e===401?new ks(e,a,n,r):e===403?new Fs(e,a,n,r):e===404?new Is(e,a,n,r):e===409?new Ms(e,a,n,r):e===422?new Os(e,a,n,r):e===429?new Ts(e,a,n,r):e>=500?new Ls(e,a,n,r):new U(e,a,n,r)}}class Y extends U{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class an extends U{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class Tn extends an{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Rs extends U{constructor(){super(...arguments),this.status=400}}class ks extends U{constructor(){super(...arguments),this.status=401}}class Fs extends U{constructor(){super(...arguments),this.status=403}}class Is extends U{constructor(){super(...arguments),this.status=404}}class Ms extends U{constructor(){super(...arguments),this.status=409}}class Os extends U{constructor(){super(...arguments),this.status=422}}class Ts extends U{constructor(){super(...arguments),this.status=429}}class Ls extends U{}class he{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const i of br(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null){let o;try{o=JSON.parse(i.data)}catch(f){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),f}if(o&&o.error)throw new U(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(i.data)}catch(f){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),f}if(i.event=="error")throw new U(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new he(r,t)}static fromReadableStream(e,t){let n=!1;async function*r(){const i=new $e,o=Ds(e);for await(const f of o)for(const g of i.decode(f))yield g;for(const f of i.flush())yield f}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||t.abort()}}return new he(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=n.next();e.push(i),t.push(i)}return a.shift()}});return[new he(()=>r(e),this.controller),new he(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new Ss({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:i}=await t.next();if(i)return r.close();const o=n.encode(JSON.stringify(a)+`
`);r.enqueue(o)}catch(a){r.error(a)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*br(s,e){if(!s.body)throw e.abort(),new k("Attempted to iterate over a response with no body");const t=new Ar,n=new $e,r=Ds(s.body);for await(const a of Cr(r))for(const i of n.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of n.flush()){const i=t.decode(a);i&&(yield i)}}async function*Cr(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let a;for(;(a=vr(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}function vr(s){for(let n=0;n<s.length-2;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}class Ar{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=Sr(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}class $e{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=$e.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split($e.NEWLINE_REGEXP);return n&&r.pop(),r.length===1&&!n?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new k(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new k(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new k("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}$e.NEWLINE_CHARS=new Set([`
`,"\r"]);$e.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Sr(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function Ds(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const js=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",Bs=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Ns(s),Ns=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",xr=s=>Bs(s)||js(s)||$s(s);async function Hs(s,e,t){var r;if(s=await s,t??(t=Bs(s)?{lastModified:s.lastModified,type:s.type}:{}),js(s)){const a=await s.blob();return e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new vn([a],e,t)}const n=await Er(s);if(e||(e=$r(s)??"unknown_file"),!t.type){const a=(r=n[0])==null?void 0:r.type;typeof a=="string"&&(t={...t,type:a})}return new vn(n,e,t)}async function Er(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Ns(s))e.push(await s.arrayBuffer());else if(Rr(s))for await(const n of s)e.push(n);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(t=s==null?void 0:s.constructor)==null?void 0:t.name}; props: ${Pr(s)}`);return e}function Pr(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function $r(s){var e;return gn(s.name)||gn(s.filename)||((e=gn(s.path))==null?void 0:e.split(/[\\/]/).pop())}const gn=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},Rr=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",es=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",it=async s=>{const e=await kr(s.body);return xs(e,s)},kr=async s=>{const e=new As;return await Promise.all(Object.entries(s||{}).map(([t,n])=>An(e,t,n))),e},An=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(xr(t)){const n=await Hs(t);s.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>An(s,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>An(s,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Ne={},Fr=function(s,e,t,n,r){if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t},Ir=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ft;async function Ws(s){const{response:e}=s;if(s.options.stream)return He("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):he.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const a=await e.json();return He("response",e.status,e.url,e.headers,a),a}const r=await e.text();return He("response",e.status,e.url,e.headers,r),r}class on extends Promise{constructor(e,t=Ws){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new on(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Mr{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=pn("maxRetries",t),this.timeout=pn("timeout",n),this.httpAgent=r,this.fetch=a??vs}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Br(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Ur()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(r=>({method:e,path:t,...r})))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var w;const{method:t,path:n,query:r,headers:a={}}=e,i=es(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(i),f=this.buildURL(n,r);"timeout"in e&&pn("timeout",e.timeout);const g=e.timeout??this.timeout,b=e.httpAgent??this.httpAgent??Es(f),S=g+1e3;typeof((w=b==null?void 0:b.options)==null?void 0:w.timeout)=="number"&&S>(b.options.timeout??0)&&(b.options.timeout=S),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const x=this.buildHeaders({options:e,headers:a,contentLength:o});return{req:{method:t,...i&&{body:i},headers:x,...b&&{agent:b},signal:e.signal??null},url:f,timeout:g}}buildHeaders({options:e,headers:t,contentLength:n}){const r={};n&&(r["content-length"]=n);const a=this.defaultHeaders(e);return rs(r,a),rs(r,t),es(e.body)&&st!=="node"&&delete r["content-type"],this.validateHeaders(r,t),r}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,r){return U.generate(e,t,n,r)}request(e,t=null){return new on(this.makeRequest(e,t))}async makeRequest(e,t){var b,S;const n=await e;t==null&&(t=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:r,url:a,timeout:i}=this.buildRequest(n);if(await this.prepareRequest(r,{url:a,options:n}),He("request",a,n,r.headers),(b=n.signal)!=null&&b.aborted)throw new Y;const o=new AbortController,f=await this.fetchWithTimeout(a,r,i,o).catch(Sn);if(f instanceof Error){if((S=n.signal)!=null&&S.aborted)throw new Y;if(t)return this.retryRequest(n,t);throw f.name==="AbortError"?new Tn:new an({cause:f})}const g=Tr(f.headers);if(!f.ok){if(t&&this.shouldRetry(f)){const A=`retrying, ${t} attempts remaining`;return He(`response (error; ${A})`,f.status,a,g),this.retryRequest(n,t,g)}const x=await f.text().catch(A=>Sn(A).message),C=Nr(x),w=C?void 0:x;throw He(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,f.status,a,g,w),this.makeStatusError(f.status,C,w,g)}return{response:f,options:n,controller:o}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Or(this,n,e)}buildURL(e,t){const n=Wr(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return qs(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new k(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...i}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r;const a=n==null?void 0:n["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(r=o)}const i=n==null?void 0:n["retry-after"];if(i&&!r){const o=parseFloat(i);Number.isNaN(o)?r=Date.parse(i)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,o)}return await ct(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Te}`}}class Us{constructor(e,t,n,r){ft.set(this,void 0),Fr(this,ft,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new k("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,a]of n)e.url.searchParams.set(r,a);t.query=void 0,t.path=e.url.toString()}return await Ir(this,ft,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ft=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Or extends on{constructor(e,t,n){super(t,async r=>new n(e,r.response,await Ws(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Tr=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Lr={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},Q=s=>typeof s=="object"&&s!==null&&!qs(s)&&Object.keys(s).every(e=>Xs(Lr,e)),Dr=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Te,"X-Stainless-OS":ns(Deno.build.os),"X-Stainless-Arch":ts(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Te,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Te,"X-Stainless-OS":ns(process.platform),"X-Stainless-Arch":ts(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=jr();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Te,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Te,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function jr(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,a=n[2]||0,i=n[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const ts=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",ns=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let ss;const Br=()=>ss??(ss=Dr()),Nr=s=>{try{return JSON.parse(s)}catch{return}},Hr=new RegExp("^(?:[a-z]+:)?//","i"),Wr=s=>Hr.test(s),ct=s=>new Promise(e=>setTimeout(e,s)),pn=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new k(`${s} must be an integer`);if(e<0)throw new k(`${s} must be a positive integer`);return e},Sn=s=>s instanceof Error?s:new Error(s),mt=s=>{var e,t,n,r;if(typeof process<"u")return((e=Ne==null?void 0:Ne[s])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,s))==null?void 0:r.trim()};function qs(s){if(!s)return!0;for(const e in s)return!1;return!0}function Xs(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function rs(s,e){for(const t in e){if(!Xs(e,t))continue;const n=t.toLowerCase();if(!n)continue;const r=e[t];r===null?delete s[n]:r!==void 0&&(s[n]=r)}}function He(s,...e){typeof process<"u"&&(Ne==null?void 0:Ne.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${s}`,...e)}const Ur=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),qr=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function as(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}class Ln extends Us{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class oe extends Us{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}class O{constructor(e){this._client=e}}let Ft=class extends O{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}};Ft||(Ft={});let It=class extends O{constructor(){super(...arguments),this.completions=new Ft(this._client)}};(function(s){s.Completions=Ft})(It||(It={}));class Mt extends O{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}Mt||(Mt={});class Ot extends O{create(e,t){return this._client.post("/audio/transcriptions",it({body:e,...t}))}}Ot||(Ot={});class Tt extends O{create(e,t){return this._client.post("/audio/translations",it({body:e,...t}))}}Tt||(Tt={});class Lt extends O{constructor(){super(...arguments),this.transcriptions=new Ot(this._client),this.translations=new Tt(this._client),this.speech=new Mt(this._client)}}(function(s){s.Transcriptions=Ot,s.Translations=Tt,s.Speech=Mt})(Lt||(Lt={}));class Dt extends O{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Q(e)?this.list({},e):this._client.getAPIList("/batches",Dn,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Dn extends oe{}(function(s){s.BatchesPage=Dn})(Dt||(Dt={}));class jt extends O{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return Q(e)?this.list({},e):this._client.getAPIList("/assistants",jn,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class jn extends oe{}(function(s){s.AssistantsPage=jn})(jt||(jt={}));function is(s){return typeof s.parse=="function"}const We=s=>(s==null?void 0:s.role)==="assistant",Vs=s=>(s==null?void 0:s.role)==="function",zs=s=>(s==null?void 0:s.role)==="tool";var ne=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},$=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},q,_t,yt,Ve,ze,bt,Je,fe,Ge,Ct,vt,Le,xn,Bt,En,Pn,$n,Rn,Js,kn;const os=10;class Gs{constructor(){q.add(this),this.controller=new AbortController,_t.set(this,void 0),yt.set(this,()=>{}),Ve.set(this,()=>{}),ze.set(this,void 0),bt.set(this,()=>{}),Je.set(this,()=>{}),fe.set(this,{}),this._chatCompletions=[],this.messages=[],Ge.set(this,!1),Ct.set(this,!1),vt.set(this,!1),Le.set(this,!1),Rn.set(this,e=>{if(ne(this,Ct,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Y),e instanceof Y)return ne(this,vt,!0,"f"),this._emit("abort",e);if(e instanceof k)return this._emit("error",e);if(e instanceof Error){const t=new k(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new k(String(e)))}),ne(this,_t,new Promise((e,t)=>{ne(this,yt,e,"f"),ne(this,Ve,t,"f")}),"f"),ne(this,ze,new Promise((e,t)=>{ne(this,bt,e,"f"),ne(this,Je,t,"f")}),"f"),$(this,_t,"f").catch(()=>{}),$(this,ze,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},$(this,Rn,"f"))},0)}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Vs(e)||zs(e))&&e.content)this._emit("functionCallResult",e.content);else if(We(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(We(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}_connected(){this.ended||($(this,yt,"f").call(this),this._emit("connect"))}get ended(){return $(this,Ge,"f")}get errored(){return $(this,Ct,"f")}get aborted(){return $(this,vt,"f")}abort(){this.controller.abort()}on(e,t){return($(this,fe,"f")[e]||($(this,fe,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=$(this,fe,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return($(this,fe,"f")[e]||($(this,fe,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{ne(this,Le,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){ne(this,Le,!0,"f"),await $(this,ze,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new k("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),$(this,q,"m",xn).call(this)}async finalMessage(){return await this.done(),$(this,q,"m",Bt).call(this)}async finalFunctionCall(){return await this.done(),$(this,q,"m",En).call(this)}async finalFunctionCallResult(){return await this.done(),$(this,q,"m",Pn).call(this)}async totalUsage(){return await this.done(),$(this,q,"m",$n).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if($(this,Ge,"f"))return;e==="end"&&(ne(this,Ge,!0,"f"),$(this,bt,"f").call(this));const n=$(this,fe,"f")[e];if(n&&($(this,fe,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!$(this,Le,"f")&&!(n!=null&&n.length)&&Promise.reject(r),$(this,Ve,"f").call(this,r),$(this,Je,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!$(this,Le,"f")&&!(n!=null&&n.length)&&Promise.reject(r),$(this,Ve,"f").call(this,r),$(this,Je,"f").call(this,r),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=$(this,q,"m",Bt).call(this);t&&this._emit("finalMessage",t);const n=$(this,q,"m",xn).call(this);n&&this._emit("finalContent",n);const r=$(this,q,"m",En).call(this);r&&this._emit("finalFunctionCall",r);const a=$(this,q,"m",Pn).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",$(this,q,"m",$n).call(this))}async _createChatCompletion(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),$(this,q,"m",Js).call(this,t);const a=await e.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(a)}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var x;const r="function",{function_call:a="auto",stream:i,...o}=t,f=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:g=os}=n||{},b={};for(const C of t.functions)b[C.name||C.function.name]=C;const S=t.functions.map(C=>({name:C.name||C.function.name,parameters:C.parameters,description:C.description}));for(const C of t.messages)this._addMessage(C,!1);for(let C=0;C<g;++C){const E=(x=(await this._createChatCompletion(e,{...o,function_call:a,functions:S,messages:[...this.messages]},n)).choices[0])==null?void 0:x.message;if(!E)throw new k("missing message in ChatCompletion response");if(!E.function_call)return;const{name:_,arguments:A}=E.function_call,l=b[_];if(l){if(f&&f!==_){const d=`Invalid function_call: ${JSON.stringify(_)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:r,name:_,content:d});continue}}else{const d=`Invalid function_call: ${JSON.stringify(_)}. Available options are: ${S.map(m=>JSON.stringify(m.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:_,content:d});continue}let c;try{c=is(l)?await l.parse(A):A}catch(d){this._addMessage({role:r,name:_,content:d instanceof Error?d.message:String(d)});continue}const u=await l.function(c,this),h=$(this,q,"m",kn).call(this,u);if(this._addMessage({role:r,name:_,content:h}),f)return}}async _runTools(e,t,n){var x,C;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,f=typeof a!="string"&&((x=a==null?void 0:a.function)==null?void 0:x.name),{maxChatCompletions:g=os}=n||{},b={};for(const w of t.tools)w.type==="function"&&(b[w.function.name||w.function.function.name]=w.function);const S="tools"in t?t.tools.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description}}:w):void 0;for(const w of t.messages)this._addMessage(w,!1);for(let w=0;w<g;++w){const _=(C=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:S,messages:[...this.messages]},n)).choices[0])==null?void 0:C.message;if(!_)throw new k("missing message in ChatCompletion response");if(!_.tool_calls)return;for(const A of _.tool_calls){if(A.type!=="function")continue;const l=A.id,{name:c,arguments:u}=A.function,h=b[c];if(h){if(f&&f!==c){const p=`Invalid tool_call: ${JSON.stringify(c)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:r,tool_call_id:l,content:p});continue}}else{const p=`Invalid tool_call: ${JSON.stringify(c)}. Available options are: ${S.map(F=>JSON.stringify(F.function.name)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:l,content:p});continue}let d;try{d=is(h)?await h.parse(u):u}catch(p){const F=p instanceof Error?p.message:String(p);this._addMessage({role:r,tool_call_id:l,content:F});continue}const m=await h.function(d,this),v=$(this,q,"m",kn).call(this,m);if(this._addMessage({role:r,tool_call_id:l,content:v}),f)return}}}}_t=new WeakMap,yt=new WeakMap,Ve=new WeakMap,ze=new WeakMap,bt=new WeakMap,Je=new WeakMap,fe=new WeakMap,Ge=new WeakMap,Ct=new WeakMap,vt=new WeakMap,Le=new WeakMap,Rn=new WeakMap,q=new WeakSet,xn=function(){return $(this,q,"m",Bt).call(this).content??null},Bt=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(We(t))return{...t,content:t.content??null}}throw new k("stream ended without producing a ChatCompletionMessage with role=assistant")},En=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(We(r)&&(r!=null&&r.function_call))return r.function_call;if(We(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},Pn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Vs(t)&&t.content!=null||zs(t)&&t.content!=null&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},$n=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Js=function(e){if(e.n!=null&&e.n>1)throw new k("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},kn=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ot extends Gs{static runFunctions(e,t,n){const r=new ot,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new ot,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e){super._addMessage(e),We(e)&&e.content&&this._emit("content",e.content)}}var se=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},wn=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},le,_e,_n,yn,gt,ls;class lt extends Gs{constructor(){super(...arguments),le.add(this),_e.set(this,void 0)}get currentChatCompletionSnapshot(){return se(this,_e,"f")}static fromReadableStream(e){const t=new lt;return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new lt;return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),se(this,le,"m",_n).call(this);const a=await e.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of a)se(this,le,"m",yn).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new Y;return this._addChatCompletion(se(this,le,"m",gt).call(this))}async _fromReadableStream(e,t){var i;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),se(this,le,"m",_n).call(this),this._connected();const r=he.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(se(this,le,"m",gt).call(this)),se(this,le,"m",yn).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new Y;return this._addChatCompletion(se(this,le,"m",gt).call(this))}[(_e=new WeakMap,le=new WeakSet,_n=function(){this.ended||wn(this,_e,void 0,"f")},yn=function(t){var i,o,f;if(this.ended)return;const n=se(this,le,"m",ls).call(this,t);this._emit("chunk",t,n);const r=(o=(i=t.choices[0])==null?void 0:i.delta)==null?void 0:o.content,a=(f=n.choices[0])==null?void 0:f.message;r!=null&&(a==null?void 0:a.role)==="assistant"&&(a!=null&&a.content)&&this._emit("content",r,a.content)},gt=function(){if(this.ended)throw new k("stream has ended, this shouldn't happen");const t=se(this,_e,"f");if(!t)throw new k("request ended without sending any chunks");return wn(this,_e,void 0,"f"),Xr(t)},ls=function(t){var n,r,a;let i=se(this,_e,"f");const{choices:o,...f}=t;i?Object.assign(i,f):i=wn(this,_e,{...f,choices:[]},"f");for(const{delta:g,finish_reason:b,index:S,logprobs:x=null,...C}of t.choices){let w=i.choices[S];if(w||(w=i.choices[S]={finish_reason:b,index:S,message:{},logprobs:x,...C}),x)if(!w.logprobs)w.logprobs=Object.assign({},x);else{const{content:u,...h}=x;Object.assign(w.logprobs,h),u&&((n=w.logprobs).content??(n.content=[]),w.logprobs.content.push(...u))}if(b&&(w.finish_reason=b),Object.assign(w,C),!g)continue;const{content:E,function_call:_,role:A,tool_calls:l,...c}=g;if(Object.assign(w.message,c),E&&(w.message.content=(w.message.content||"")+E),A&&(w.message.role=A),_&&(w.message.function_call?(_.name&&(w.message.function_call.name=_.name),_.arguments&&((r=w.message.function_call).arguments??(r.arguments=""),w.message.function_call.arguments+=_.arguments)):w.message.function_call=_),l){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:u,id:h,type:d,function:m,...v}of l){const p=(a=w.message.tool_calls)[u]??(a[u]={});Object.assign(p,v),h&&(p.id=h),d&&(p.type=d),m&&(p.function??(p.function={arguments:""})),m!=null&&m.name&&(p.function.name=m.name),m!=null&&m.arguments&&(p.function.arguments+=m.arguments)}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new he(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Xr(s){const{id:e,choices:t,created:n,model:r,system_fingerprint:a,...i}=s;return{...i,id:e,choices:t.map(({message:o,finish_reason:f,index:g,logprobs:b,...S})=>{if(!f)throw new k(`missing finish_reason for choice ${g}`);const{content:x=null,function_call:C,tool_calls:w,...E}=o,_=o.role;if(!_)throw new k(`missing role for choice ${g}`);if(C){const{arguments:A,name:l}=C;if(A==null)throw new k(`missing function_call.arguments for choice ${g}`);if(!l)throw new k(`missing function_call.name for choice ${g}`);return{...S,message:{content:x,function_call:{arguments:A,name:l},role:_},finish_reason:f,index:g,logprobs:b}}return w?{...S,index:g,finish_reason:f,logprobs:b,message:{...E,role:_,content:x,tool_calls:w.map((A,l)=>{const{function:c,type:u,id:h,...d}=A,{arguments:m,name:v,...p}=c||{};if(h==null)throw new k(`missing choices[${g}].tool_calls[${l}].id
${pt(s)}`);if(u==null)throw new k(`missing choices[${g}].tool_calls[${l}].type
${pt(s)}`);if(v==null)throw new k(`missing choices[${g}].tool_calls[${l}].function.name
${pt(s)}`);if(m==null)throw new k(`missing choices[${g}].tool_calls[${l}].function.arguments
${pt(s)}`);return{...d,id:h,type:u,function:{...p,name:v,arguments:m}}})}}:{...S,message:{...E,content:x,role:_},finish_reason:f,index:g,logprobs:b}}),created:n,model:r,object:"chat.completion",...a?{system_fingerprint:a}:{}}}function pt(s){return JSON.stringify(s)}class Ue extends lt{static fromReadableStream(e){const t=new Ue;return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new Ue,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new Ue,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let Zs=class extends O{runFunctions(e,t){return e.stream?Ue.runFunctions(this._client.chat.completions,e,t):ot.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?Ue.runTools(this._client.chat.completions,e,t):ot.runTools(this._client.chat.completions,e,t)}stream(e,t){return lt.createChatCompletion(this._client.chat.completions,e,t)}};class Nt extends O{constructor(){super(...arguments),this.completions=new Zs(this._client)}}(function(s){s.Completions=Zs})(Nt||(Nt={}));var re=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},L=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},At,St,Ze,Ke,xt,Ye,me,Qe,Et,Pt,De,Fn;class Vr{constructor(){this.controller=new AbortController,At.set(this,void 0),St.set(this,()=>{}),Ze.set(this,()=>{}),Ke.set(this,void 0),xt.set(this,()=>{}),Ye.set(this,()=>{}),me.set(this,{}),Qe.set(this,!1),Et.set(this,!1),Pt.set(this,!1),De.set(this,!1),Fn.set(this,e=>{if(re(this,Et,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Y),e instanceof Y)return re(this,Pt,!0,"f"),this._emit("abort",e);if(e instanceof k)return this._emit("error",e);if(e instanceof Error){const t=new k(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new k(String(e)))}),re(this,At,new Promise((e,t)=>{re(this,St,e,"f"),re(this,Ze,t,"f")}),"f"),re(this,Ke,new Promise((e,t)=>{re(this,xt,e,"f"),re(this,Ye,t,"f")}),"f"),L(this,At,"f").catch(()=>{}),L(this,Ke,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emit("end")},L(this,Fn,"f"))},0)}_addRun(e){return e}_connected(){this.ended||(L(this,St,"f").call(this),this._emit("connect"))}get ended(){return L(this,Qe,"f")}get errored(){return L(this,Et,"f")}get aborted(){return L(this,Pt,"f")}abort(){this.controller.abort()}on(e,t){return(L(this,me,"f")[e]||(L(this,me,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=L(this,me,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(L(this,me,"f")[e]||(L(this,me,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{re(this,De,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){re(this,De,!0,"f"),await L(this,Ke,"f")}_emit(e,...t){if(L(this,Qe,"f"))return;e==="end"&&(re(this,Qe,!0,"f"),L(this,xt,"f").call(this));const n=L(this,me,"f")[e];if(n&&(L(this,me,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!L(this,De,"f")&&!(n!=null&&n.length)&&Promise.reject(r),L(this,Ze,"f").call(this,r),L(this,Ye,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!L(this,De,"f")&&!(n!=null&&n.length)&&Promise.reject(r),L(this,Ze,"f").call(this,r),L(this,Ye,"f").call(this,r),this._emit("end")}}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}async _createThreadAssistantStream(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a=await e.createAndRun({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(a)}async _createToolAssistantStream(e,t,n,r,a){const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o=await e.submitToolOutputs(t,n,{...r,stream:!1},{...a,signal:this.controller.signal});return this._connected(),this._addRun(o)}async _createAssistantStream(e,t,n,r){const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i=await e.create(t,{...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addRun(i)}}At=new WeakMap,St=new WeakMap,Ze=new WeakMap,Ke=new WeakMap,xt=new WeakMap,Ye=new WeakMap,me=new WeakMap,Qe=new WeakMap,Et=new WeakMap,Pt=new WeakMap,De=new WeakMap,Fn=new WeakMap;var y=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},G=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},H,In,ue,$t,ae,Pe,je,xe,Ht,K,Rt,kt,rt,et,tt,cs,us,hs,ds,fs,ms,gs;class ie extends Vr{constructor(){super(...arguments),H.add(this),In.set(this,[]),ue.set(this,{}),$t.set(this,{}),ae.set(this,void 0),Pe.set(this,void 0),je.set(this,void 0),xe.set(this,void 0),Ht.set(this,void 0),K.set(this,void 0),Rt.set(this,void 0),kt.set(this,void 0),rt.set(this,void 0)}[(In=new WeakMap,ue=new WeakMap,$t=new WeakMap,ae=new WeakMap,Pe=new WeakMap,je=new WeakMap,xe=new WeakMap,Ht=new WeakMap,K=new WeakMap,Rt=new WeakMap,kt=new WeakMap,rt=new WeakMap,H=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ie;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=he.fromReadableStream(e,this.controller);for await(const i of r)y(this,H,"m",et).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new Y;return this._addRun(y(this,H,"m",tt).call(this))}toReadableStream(){return new he(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const i=new ie;return i._run(()=>i._runToolAssistantStream(e,t,n,r,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,n,r,a){var g;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},f=await e.submitToolOutputs(t,n,o,{...a,signal:this.controller.signal});this._connected();for await(const b of f)y(this,H,"m",et).call(this,b);if((g=f.controller.signal)!=null&&g.aborted)throw new Y;return this._addRun(y(this,H,"m",tt).call(this))}static createThreadAssistantStream(e,t,n){const r=new ie;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new ie;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return y(this,Rt,"f")}currentRun(){return y(this,kt,"f")}currentMessageSnapshot(){return y(this,ae,"f")}currentRunStepSnapshot(){return y(this,rt,"f")}async finalRunSteps(){return await this.done(),Object.values(y(this,ue,"f"))}async finalMessages(){return await this.done(),Object.values(y(this,$t,"f"))}async finalRun(){if(await this.done(),!y(this,Pe,"f"))throw Error("Final run was not received.");return y(this,Pe,"f")}async _createThreadAssistantStream(e,t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const f of i)y(this,H,"m",et).call(this,f);if((o=i.controller.signal)!=null&&o.aborted)throw new Y;return this._addRun(y(this,H,"m",tt).call(this))}async _createAssistantStream(e,t,n,r){var f;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const g of o)y(this,H,"m",et).call(this,g);if((f=o.controller.signal)!=null&&f.aborted)throw new Y;return this._addRun(y(this,H,"m",tt).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let a=e[n];if(a==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(as(a)&&as(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${a}`);e[n]=a}return e}}et=function(e){if(!this.ended)switch(G(this,Rt,e,"f"),y(this,H,"m",hs).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":y(this,H,"m",gs).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":y(this,H,"m",us).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":y(this,H,"m",cs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},tt=function(){if(this.ended)throw new k("stream has ended, this shouldn't happen");if(!y(this,Pe,"f"))throw Error("Final run has not been received");return y(this,Pe,"f")},cs=function(e){const[t,n]=y(this,H,"m",fs).call(this,e,y(this,ae,"f"));G(this,ae,t,"f"),y(this,$t,"f")[t.id]=t;for(const r of n){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=y(this,je,"f")){if(y(this,xe,"f"))switch(y(this,xe,"f").type){case"text":this._emit("textDone",y(this,xe,"f").text,y(this,ae,"f"));break;case"image_file":this._emit("imageFileDone",y(this,xe,"f").image_file,y(this,ae,"f"));break}G(this,je,r.index,"f")}G(this,xe,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(y(this,je,"f")!==void 0){const r=e.data.content[y(this,je,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,y(this,ae,"f"));break;case"text":this._emit("textDone",r.text,y(this,ae,"f"));break}}y(this,ae,"f")&&this._emit("messageDone",e.data),G(this,ae,void 0,"f")}},us=function(e){const t=y(this,H,"m",ds).call(this,e);switch(G(this,rt,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==y(this,Ht,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(y(this,K,"f")&&this._emit("toolCallDone",y(this,K,"f")),G(this,Ht,a.index,"f"),G(this,K,t.step_details.tool_calls[a.index],"f"),y(this,K,"f")&&this._emit("toolCallCreated",y(this,K,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":G(this,rt,void 0,"f"),e.data.step_details.type=="tool_calls"&&y(this,K,"f")&&(this._emit("toolCallDone",y(this,K,"f")),G(this,K,void 0,"f")),this._emit("runStepDone",e.data,t);break}},hs=function(e){y(this,In,"f").push(e),this._emit("event",e)},ds=function(e){switch(e.event){case"thread.run.step.created":return y(this,ue,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=y(this,ue,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=ie.accumulateDelta(t,n.delta);y(this,ue,"f")[e.data.id]=r}return y(this,ue,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":y(this,ue,"f")[e.data.id]=e.data;break}if(y(this,ue,"f")[e.data.id])return y(this,ue,"f")[e.data.id];throw new Error("No snapshot available")},fs=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=y(this,H,"m",ms).call(this,a,i)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ms=function(e,t){return ie.accumulateDelta(t,e)},gs=function(e){switch(G(this,kt,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":G(this,Pe,e.data,"f"),y(this,K,"f")&&(this._emit("toolCallDone",y(this,K,"f")),G(this,K,void 0,"f"));break}};class Wt extends O{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return Q(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Bn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Bn extends oe{}(function(s){s.MessagesPage=Bn})(Wt||(Wt={}));class Ut extends O{retrieve(e,t,n,r){return this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t,n={},r){return Q(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Nn,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Nn extends oe{}(function(s){s.RunStepsPage=Nn})(Ut||(Ut={}));class qt extends O{constructor(){super(...arguments),this.steps=new Ut(this._client)}create(e,t,n){return this._client.post(`/threads/${e}/runs`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return Q(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Hn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return ie.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const f=i.headers.get("openai-poll-after-ms");if(f){const g=parseInt(f);isNaN(g)||(o=g)}}await ct(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return ie.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return ie.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class Hn extends oe{}(function(s){s.RunsPage=Hn,s.Steps=Ut,s.RunStepsPage=Nn})(qt||(qt={}));class Xt extends O{constructor(){super(...arguments),this.runs=new qt(this._client),this.messages=new Wt(this._client)}create(e={},t){return Q(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return ie.createThreadAssistantStream(e,this._client.beta.threads,t)}}(function(s){s.Runs=qt,s.RunsPage=Hn,s.Messages=Wt,s.MessagesPage=Bn})(Xt||(Xt={}));const zr=async s=>{const e=await Promise.allSettled(s),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};let Vt=class extends O{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e,t={},n){return Q(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,ln,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const g=parseInt(f);isNaN(g)||(o=g)}}await ct(o);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}};class ln extends oe{}(function(s){s.VectorStoreFilesPage=ln})(Vt||(Vt={}));class zt extends O{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return Q(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,ln,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const f=i.headers.get("openai-poll-after-ms");if(f){const g=parseInt(f);isNaN(g)||(o=g)}}await ct(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t===null||t.length==0)throw new Error("No files provided to process.");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,f=t.values(),g=[...n];async function b(x){for(let C of x){const w=await o.files.create({file:C,purpose:"assistants"},r);g.push(w.id)}}const S=Array(i).fill(f).map(b);return await zr(S),await this.createAndPoll(e,{file_ids:g})}}zt||(zt={});class Jt extends O{constructor(){super(...arguments),this.files=new Vt(this._client),this.fileBatches=new zt(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return Q(e)?this.list({},e):this._client.getAPIList("/vector_stores",Wn,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Wn extends oe{}(function(s){s.VectorStoresPage=Wn,s.Files=Vt,s.VectorStoreFilesPage=ln,s.FileBatches=zt})(Jt||(Jt={}));class Gt extends O{constructor(){super(...arguments),this.vectorStores=new Jt(this._client),this.chat=new Nt(this._client),this.assistants=new jt(this._client),this.threads=new Xt(this._client)}}(function(s){s.VectorStores=Jt,s.VectorStoresPage=Wn,s.Chat=Nt,s.Assistants=jt,s.AssistantsPage=jn,s.Threads=Xt})(Gt||(Gt={}));class Zt extends O{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}Zt||(Zt={});class Kt extends O{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}Kt||(Kt={});class Yt extends O{create(e,t){return this._client.post("/files",it({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Q(e)?this.list({},e):this._client.getAPIList("/files",Un,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t==null?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await ct(t),i=await this.retrieve(e),Date.now()-a>n)throw new Tn({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}}class Un extends Ln{}(function(s){s.FileObjectsPage=Un})(Yt||(Yt={}));class Qt extends O{list(e,t={},n){return Q(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,qn,{query:t,...n})}}class qn extends oe{}(function(s){s.FineTuningJobCheckpointsPage=qn})(Qt||(Qt={}));class en extends O{constructor(){super(...arguments),this.checkpoints=new Qt(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Q(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Xn,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Q(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Vn,{query:t,...n})}}class Xn extends oe{}class Vn extends oe{}(function(s){s.FineTuningJobsPage=Xn,s.FineTuningJobEventsPage=Vn,s.Checkpoints=Qt,s.FineTuningJobCheckpointsPage=qn})(en||(en={}));class tn extends O{constructor(){super(...arguments),this.jobs=new en(this._client)}}(function(s){s.Jobs=en,s.FineTuningJobsPage=Xn,s.FineTuningJobEventsPage=Vn})(tn||(tn={}));class nn extends O{createVariation(e,t){return this._client.post("/images/variations",it({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",it({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}nn||(nn={});class sn extends O{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",zn,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class zn extends Ln{}(function(s){s.ModelsPage=zn})(sn||(sn={}));class rn extends O{create(e,t){return this._client.post("/moderations",{body:e,...t})}}rn||(rn={});var Ks;class D extends Mr{constructor({baseURL:e=mt("OPENAI_BASE_URL"),apiKey:t=mt("OPENAI_API_KEY"),organization:n=mt("OPENAI_ORG_ID")??null,project:r=mt("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new k("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&qr())throw new k(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new Zt(this),this.chat=new It(this),this.embeddings=new Kt(this),this.files=new Yt(this),this.images=new nn(this),this.audio=new Lt(this),this.moderations=new rn(this),this.models=new sn(this),this.fineTuning=new tn(this),this.beta=new Gt(this),this.batches=new Dt(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}Ks=D;D.OpenAI=Ks;D.OpenAIError=k;D.APIError=U;D.APIConnectionError=an;D.APIConnectionTimeoutError=Tn;D.APIUserAbortError=Y;D.NotFoundError=Is;D.ConflictError=Ms;D.RateLimitError=Ts;D.BadRequestError=Rs;D.AuthenticationError=ks;D.InternalServerError=Ls;D.PermissionDeniedError=Fs;D.UnprocessableEntityError=Os;D.toFile=Hs;D.fileFromPath=Ps;(function(s){s.Page=Ln,s.CursorPage=oe,s.Completions=Zt,s.Chat=It,s.Embeddings=Kt,s.Files=Yt,s.FileObjectsPage=Un,s.Images=nn,s.Audio=Lt,s.Moderations=rn,s.Models=sn,s.ModelsPage=zn,s.FineTuning=tn,s.Beta=Gt,s.Batches=Dt,s.BatchesPage=Dn})(D||(D={}));function Jr(s){let e;return{c(){e=M("div"),e.innerHTML='<a href="//oktech.ru/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="204" height="47" viewBox="0 0 204 47" fill="none"><path d="M0 22.5487C0 11.9228 0 6.60983 3.30491 3.30491C6.60981 0 11.9228 0 22.5487 0H24.4312C35.0571 0 40.37 0 43.6749 3.30491C46.9799 6.60983 46.9799 11.9228 46.9799 22.5487V24.4313C46.9799 35.0572 46.9799 40.3701 43.6749 43.6751C40.37 46.98 35.0571 46.98 24.4312 46.98H22.5487C11.9228 46.98 6.60981 46.98 3.30491 43.6751C0 40.3701 0 35.0572 0 24.4313V22.5487Z" fill="#FF7700"></path><path d="M23.4899 23.3646C25.7908 23.3646 27.8615 22.4441 29.3677 20.9381C30.8737 19.4321 31.794 17.3404 31.794 15.0604C31.794 12.7595 30.8737 10.6887 29.3677 9.18267C27.8615 7.67664 25.7908 6.75629 23.4899 6.75629C21.189 6.75629 19.1182 7.67664 17.6122 9.18267C16.1061 10.6887 15.1858 12.7595 15.1858 15.0604C15.1858 17.3613 16.1061 19.4321 17.6122 20.9381C19.1182 22.4232 21.189 23.3646 23.4899 23.3646ZM20.8335 12.383C21.5237 11.6927 22.465 11.2744 23.4899 11.2744C24.5358 11.2744 25.477 11.6927 26.1464 12.383C26.8366 13.0733 27.255 14.0145 27.255 15.0395C27.255 16.0644 26.8366 17.0266 26.1464 17.696C25.4561 18.3863 24.5149 18.8046 23.4899 18.8046C22.4441 18.8046 21.5027 18.3863 20.8335 17.696C20.1432 17.0058 19.7249 16.0644 19.7249 15.0395C19.7249 14.0145 20.1432 13.0733 20.8335 12.383Z" fill="white"></path><path d="M34.6597 26.7112L32.2123 23.3854C32.066 23.1972 31.8149 23.1762 31.6267 23.3226C29.3258 25.2889 26.502 26.5439 23.469 26.5439C20.436 26.5439 17.6122 25.268 15.3113 23.3226C15.144 23.1762 14.8721 23.1972 14.7256 23.3854L12.2993 26.7112C12.1738 26.8786 12.2156 27.1086 12.3621 27.2341C14.4119 28.9075 16.7964 30.0161 19.2856 30.6018L14.14 39.659C14.0145 39.9099 14.2027 40.2237 14.4956 40.2237H19.5366C19.683 40.2237 19.8295 40.1401 19.8921 39.9936L23.49 31.9614L27.0877 39.9936C27.1504 40.1401 27.2969 40.2237 27.4432 40.2237H32.4843C32.7771 40.2237 32.9654 39.9099 32.819 39.659L27.6734 30.6018C30.1625 30.0161 32.5262 28.9075 34.576 27.2341C34.7434 27.1086 34.7643 26.8786 34.6597 26.7112Z" fill="white"></path><path d="M69.4015 35.5705C67.6051 35.5705 65.9511 35.2685 64.4394 34.6645C62.9278 34.0604 61.6133 33.2215 60.496 32.1477C59.3788 31.0515 58.5134 29.7763 57.9 28.3222C57.2866 26.8457 56.9799 25.2349 56.9799 23.49C56.9799 21.745 57.2866 20.1454 57.9 18.6913C58.5134 17.2148 59.3788 15.9396 60.496 14.8658C61.6133 13.7696 62.9278 12.9195 64.4394 12.3155C65.9511 11.7114 67.5941 11.4094 69.3687 11.4094C71.1651 11.4094 72.8082 11.7114 74.2979 12.3155C75.8095 12.9195 77.124 13.7696 78.2413 14.8658C79.3586 15.9396 80.2239 17.2148 80.8374 18.6913C81.4508 20.1454 81.7575 21.745 81.7575 23.49C81.7575 25.2349 81.4508 26.8457 80.8374 28.3222C80.2239 29.7987 79.3586 31.0739 78.2413 32.1477C77.124 33.2215 75.8095 34.0604 74.2979 34.6645C72.8082 35.2685 71.1761 35.5705 69.4015 35.5705ZM69.3687 31.745C70.5298 31.745 71.6033 31.5437 72.5891 31.141C73.575 30.7383 74.4294 30.1678 75.1523 29.4296C75.8753 28.6689 76.4339 27.7964 76.8282 26.8121C77.2445 25.8054 77.4526 24.698 77.4526 23.49C77.4526 22.2819 77.2445 21.1857 76.8282 20.2014C76.4339 19.1947 75.8753 18.3222 75.1523 17.5839C74.4294 16.8233 73.575 16.2416 72.5891 15.839C71.6033 15.4363 70.5298 15.2349 69.3687 15.2349C68.2076 15.2349 67.1341 15.4363 66.1482 15.839C65.1843 16.2416 64.3299 16.8233 63.585 17.5839C62.8621 18.3222 62.2925 19.1947 61.8762 20.2014C61.4819 21.1857 61.2847 22.2819 61.2847 23.49C61.2847 24.6756 61.4819 25.7718 61.8762 26.7786C62.2925 27.7853 62.8621 28.6689 63.585 29.4296C64.308 30.1678 65.1624 30.7383 66.1482 31.141C67.1341 31.5437 68.2076 31.745 69.3687 31.745Z" fill="white"></path><path d="M90.0977 29.698L89.8676 24.5302L101.928 11.745H106.726L96.7028 22.6175L94.3368 25.2685L90.0977 29.698ZM86.2857 35.2349V11.745H90.5577V35.2349H86.2857ZM102.322 35.2349L93.5153 24.5302L96.3413 21.3423L107.317 35.2349H102.322Z" fill="white"></path><path d="M111.146 35.4698C110.401 35.4698 109.766 35.2126 109.24 34.698C108.714 34.1611 108.451 33.49 108.451 32.6846C108.451 31.8345 108.714 31.1633 109.24 30.6712C109.766 30.1566 110.401 29.8994 111.146 29.8994C111.891 29.8994 112.526 30.1566 113.052 30.6712C113.578 31.1633 113.841 31.8345 113.841 32.6846C113.841 33.49 113.578 34.1611 113.052 34.698C112.526 35.2126 111.891 35.4698 111.146 35.4698Z" fill="white"></path><path d="M121.856 35.2349V15.4363H114.232V11.745H133.752V15.4363H126.128V35.2349H121.856Z" fill="white"></path><path d="M140.901 21.5101H152.337V25.1007H140.901V21.5101ZM141.23 31.5772H154.21V35.2349H136.958V11.745H153.75V15.4027H141.23V31.5772Z" fill="white"></path><path d="M169.62 35.5705C167.867 35.5705 166.235 35.2797 164.723 34.698C163.234 34.094 161.93 33.2551 160.813 32.1812C159.718 31.085 158.863 29.7987 158.25 28.3222C157.636 26.8457 157.33 25.2349 157.33 23.49C157.33 21.745 157.636 20.1343 158.25 18.6577C158.863 17.1812 159.729 15.9061 160.846 14.8322C161.963 13.736 163.267 12.8971 164.756 12.3155C166.246 11.7114 167.878 11.4094 169.653 11.4094C171.537 11.4094 173.257 11.745 174.812 12.4161C176.367 13.0649 177.682 14.0381 178.755 15.3356L175.995 17.9866C175.162 17.0694 174.231 16.3871 173.202 15.9396C172.172 15.4698 171.055 15.2349 169.85 15.2349C168.645 15.2349 167.539 15.4363 166.531 15.839C165.545 16.2416 164.68 16.8121 163.935 17.5504C163.212 18.2886 162.642 19.1611 162.226 20.1678C161.832 21.1745 161.634 22.2819 161.634 23.49C161.634 24.698 161.832 25.8054 162.226 26.8121C162.642 27.8188 163.212 28.6913 163.935 29.4296C164.68 30.1678 165.545 30.7383 166.531 31.141C167.539 31.5437 168.645 31.745 169.85 31.745C171.055 31.745 172.172 31.5213 173.202 31.0739C174.231 30.6041 175.162 29.8994 175.995 28.9598L178.755 31.6443C177.682 32.9195 176.367 33.8926 174.812 34.5638C173.257 35.2349 171.526 35.5705 169.62 35.5705Z" fill="white"></path><path d="M199.017 11.745H203.289V35.2349H199.017V11.745ZM187.121 35.2349H182.849V11.745H187.121V35.2349ZM199.345 25.1678H186.759V21.443H199.345V25.1678Z" fill="white"></path></svg></a>',P(e,"class","logo svelte-lwb9qh")},m(t,n){Ce(t,e,n)},p:W,i:W,o:W,d(t){t&&ge(e)}}}class Gr extends ke{constructor(e){super(),Re(this,e,null,Jr,be,{})}}function Zr(s){let e,t,n,r,a,i;return{c(){e=M("div"),t=M("textarea"),n=Z(),r=M("button"),r.textContent="Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ",P(t,"class","pane editable"),P(t,"placeholder","Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚, Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ð¹ ..."),P(r,"class","button svelte-y59ur")},m(o,f){Ce(o,e,f),R(e,t),Zn(t,s[0]),R(e,n),R(e,r),a||(i=[fn(t,"submit",s[1]),fn(t,"input",s[2]),fn(r,"click",s[1])],a=!0)},p(o,[f]){f&1&&Zn(t,o[0])},i:W,o:W,d(o){o&&ge(e),a=!1,qe(i)}}}function Kr(s,e,t){let n="";const r=lr();function a(){r("submit",{prompt:n})}function i(){n=this.value,t(0,n)}return[n,a,i]}class Yr extends ke{constructor(e){super(),Re(this,e,Kr,Zr,be,{})}}var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qr(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ys={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function l(c){return c instanceof f?new f(c.type,l(c.content),c.alias):Array.isArray(c)?c.map(l):c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++a}),l.__id},clone:function l(c,u){u=u||{};var h,d;switch(o.util.type(c)){case"Object":if(d=o.util.objId(c),u[d])return u[d];h={},u[d]=h;for(var m in c)c.hasOwnProperty(m)&&(h[m]=l(c[m],u));return h;case"Array":return d=o.util.objId(c),u[d]?u[d]:(h=[],u[d]=h,c.forEach(function(v,p){h[p]=l(v,u)}),h);default:return c}},getLanguage:function(l){for(;l;){var c=r.exec(l.className);if(c)return c[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,c){l.className=l.className.replace(RegExp(r,"gi"),""),l.classList.add("language-"+c)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(h){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(h.stack)||[])[1];if(l){var c=document.getElementsByTagName("script");for(var u in c)if(c[u].src==l)return c[u]}return null}},isActive:function(l,c,u){for(var h="no-"+c;l;){var d=l.classList;if(d.contains(c))return!0;if(d.contains(h))return!1;l=l.parentElement}return!!u}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(l,c){var u=o.util.clone(o.languages[l]);for(var h in c)u[h]=c[h];return u},insertBefore:function(l,c,u,h){h=h||o.languages;var d=h[l],m={};for(var v in d)if(d.hasOwnProperty(v)){if(v==c)for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p]);u.hasOwnProperty(v)||(m[v]=d[v])}var F=h[l];return h[l]=m,o.languages.DFS(o.languages,function(T,V){V===F&&T!=l&&(this[T]=m)}),m},DFS:function l(c,u,h,d){d=d||{};var m=o.util.objId;for(var v in c)if(c.hasOwnProperty(v)){u.call(c,v,c[v],h||v);var p=c[v],F=o.util.type(p);F==="Object"&&!d[m(p)]?(d[m(p)]=!0,l(p,u,null,d)):F==="Array"&&!d[m(p)]&&(d[m(p)]=!0,l(p,u,v,d))}}},plugins:{},highlightAll:function(l,c){o.highlightAllUnder(document,l,c)},highlightAllUnder:function(l,c,u){var h={callback:u,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",h),h.elements=Array.prototype.slice.apply(h.container.querySelectorAll(h.selector)),o.hooks.run("before-all-elements-highlight",h);for(var d=0,m;m=h.elements[d++];)o.highlightElement(m,c===!0,h.callback)},highlightElement:function(l,c,u){var h=o.util.getLanguage(l),d=o.languages[h];o.util.setLanguage(l,h);var m=l.parentElement;m&&m.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(m,h);var v=l.textContent,p={element:l,language:h,grammar:d,code:v};function F(V){p.highlightedCode=V,o.hooks.run("before-insert",p),p.element.innerHTML=p.highlightedCode,o.hooks.run("after-highlight",p),o.hooks.run("complete",p),u&&u.call(p.element)}if(o.hooks.run("before-sanity-check",p),m=p.element.parentElement,m&&m.nodeName.toLowerCase()==="pre"&&!m.hasAttribute("tabindex")&&m.setAttribute("tabindex","0"),!p.code){o.hooks.run("complete",p),u&&u.call(p.element);return}if(o.hooks.run("before-highlight",p),!p.grammar){F(o.util.encode(p.code));return}if(c&&n.Worker){var T=new Worker(o.filename);T.onmessage=function(V){F(V.data)},T.postMessage(JSON.stringify({language:p.language,code:p.code,immediateClose:!0}))}else F(o.highlight(p.code,p.grammar,p.language))},highlight:function(l,c,u){var h={code:l,grammar:c,language:u};if(o.hooks.run("before-tokenize",h),!h.grammar)throw new Error('The language "'+h.language+'" has no grammar.');return h.tokens=o.tokenize(h.code,h.grammar),o.hooks.run("after-tokenize",h),f.stringify(o.util.encode(h.tokens),h.language)},tokenize:function(l,c){var u=c.rest;if(u){for(var h in u)c[h]=u[h];delete c.rest}var d=new S;return x(d,d.head,l),b(l,d,c,d.head,0),w(d)},hooks:{all:{},add:function(l,c){var u=o.hooks.all;u[l]=u[l]||[],u[l].push(c)},run:function(l,c){var u=o.hooks.all[l];if(!(!u||!u.length))for(var h=0,d;d=u[h++];)d(c)}},Token:f};n.Prism=o;function f(l,c,u,h){this.type=l,this.content=c,this.alias=u,this.length=(h||"").length|0}f.stringify=function l(c,u){if(typeof c=="string")return c;if(Array.isArray(c)){var h="";return c.forEach(function(F){h+=l(F,u)}),h}var d={type:c.type,content:l(c.content,u),tag:"span",classes:["token",c.type],attributes:{},language:u},m=c.alias;m&&(Array.isArray(m)?Array.prototype.push.apply(d.classes,m):d.classes.push(m)),o.hooks.run("wrap",d);var v="";for(var p in d.attributes)v+=" "+p+'="'+(d.attributes[p]||"").replace(/"/g,"&quot;")+'"';return"<"+d.tag+' class="'+d.classes.join(" ")+'"'+v+">"+d.content+"</"+d.tag+">"};function g(l,c,u,h){l.lastIndex=c;var d=l.exec(u);if(d&&h&&d[1]){var m=d[1].length;d.index+=m,d[0]=d[0].slice(m)}return d}function b(l,c,u,h,d,m){for(var v in u)if(!(!u.hasOwnProperty(v)||!u[v])){var p=u[v];p=Array.isArray(p)?p:[p];for(var F=0;F<p.length;++F){if(m&&m.cause==v+","+F)return;var T=p[F],V=T.inside,Xe=!!T.lookbehind,de=!!T.greedy,ut=T.alias;if(de&&!T.pattern.global){var pe=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,pe+"g")}for(var te=T.pattern||T,j=h.next,z=d;j!==c.tail&&!(m&&z>=m.reach);z+=j.value.length,j=j.next){var J=j.value;if(c.length>l.length)return;if(!(J instanceof f)){var ee=1,B;if(de){if(B=g(te,z,l,Xe),!B||B.index>=l.length)break;var ve=B.index,N=B.index+B[0].length,I=z;for(I+=j.value.length;ve>=I;)j=j.next,I+=j.value.length;if(I-=j.value.length,z=I,j.value instanceof f)continue;for(var X=j;X!==c.tail&&(I<N||typeof X.value=="string");X=X.next)ee++,I+=X.value.length;ee--,J=l.slice(z,I),B.index-=z}else if(B=g(te,0,J,Xe),!B)continue;var ve=B.index,we=B[0],cn=J.slice(0,ve),Jn=J.slice(ve+we.length),un=z+J.length;m&&un>m.reach&&(m.reach=un);var ht=j.prev;cn&&(ht=x(c,ht,cn),z+=cn.length),C(c,ht,ee);var Qs=new f(v,V?o.tokenize(we,V):we,ut,we);if(j=x(c,ht,Qs),Jn&&x(c,j,Jn),ee>1){var hn={cause:v+","+F,reach:un};b(l,c,u,j.prev,z,hn),m&&hn.reach>m.reach&&(m.reach=hn.reach)}}}}}}function S(){var l={value:null,prev:null,next:null},c={value:null,prev:l,next:null};l.next=c,this.head=l,this.tail=c,this.length=0}function x(l,c,u){var h=c.next,d={value:u,prev:c,next:h};return c.next=d,h.prev=d,l.length++,d}function C(l,c,u){for(var h=c.next,d=0;d<u&&h!==l.tail;d++)h=h.next;c.next=h,h.prev=c,l.length-=d}function w(l){for(var c=[],u=l.head.next;u!==l.tail;)c.push(u.value),u=u.next;return c}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(l){var c=JSON.parse(l.data),u=c.language,h=c.code,d=c.immediateClose;n.postMessage(o.highlight(h,o.languages[u],u)),d&&n.close()},!1)),o;var E=o.util.currentScript();E&&(o.filename=E.src,E.hasAttribute("data-manual")&&(o.manual=!0));function _(){o.manual||o.highlightAll()}if(!o.manual){var A=document.readyState;A==="loading"||A==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return o}(e);s.exports&&(s.exports=t),typeof ps<"u"&&(ps.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:t.languages[a]};var f={};f[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",f)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",r=function(E,_){return"âœ– Error "+E+" while fetching file: "+_},a="âœ– Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",f="loading",g="loaded",b="failed",S="pre[data-src]:not(["+o+'="'+g+'"]):not(['+o+'="'+f+'"])';function x(E,_,A){var l=new XMLHttpRequest;l.open("GET",E,!0),l.onreadystatechange=function(){l.readyState==4&&(l.status<400&&l.responseText?_(l.responseText):l.status>=400?A(r(l.status,l.statusText)):A(a))},l.send(null)}function C(E){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(_){var A=Number(_[1]),l=_[2],c=_[3];return l?c?[A,Number(c)]:[A,void 0]:[A,A]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+S}),t.hooks.add("before-sanity-check",function(E){var _=E.element;if(_.matches(S)){E.code="",_.setAttribute(o,f);var A=_.appendChild(document.createElement("CODE"));A.textContent=n;var l=_.getAttribute("data-src"),c=E.language;if(c==="none"){var u=(/\.(\w+)$/.exec(l)||[,"none"])[1];c=i[u]||u}t.util.setLanguage(A,c),t.util.setLanguage(_,c);var h=t.plugins.autoloader;h&&h.loadLanguages(c),x(l,function(d){_.setAttribute(o,g);var m=C(_.getAttribute("data-range"));if(m){var v=d.split(/\r\n?|\n/g),p=m[0],F=m[1]==null?v.length:m[1];p<0&&(p+=v.length),p=Math.max(0,Math.min(p-1,v.length)),F<0&&(F+=v.length),F=Math.max(0,Math.min(F,v.length)),d=v.slice(p,F).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(p+1))}A.textContent=d,t.highlightElement(A)},function(d){_.setAttribute(o,b),A.textContent=d})}}),t.plugins.fileHighlight={highlight:function(_){for(var A=(_||document).querySelectorAll(S),l=0,c;c=A[l++];)t.highlightElement(c)}};var w=!1;t.fileHighlight=function(){w||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),w=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Ys);var ea=Ys.exports;const ta=Qr(ea);Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};var a={};a[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(s,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);function na(s){let e;return{c(){e=M("div"),e.innerHTML='<div class="pane content svelte-a9w0x7"><pre class="language-html"><code></code></pre></div>',P(e,"class","block")},m(t,n){Ce(t,e,n)},p:W,i:W,o:W,d(t){t&&ge(e)}}}function sa(s,e,t){let{htmlCode:n=""}=e;function r(){const a=document.querySelector(".language-html code");a&&(a.textContent=n,ta.highlightElement(a))}return ir(()=>{r()}),or(()=>{console.log(n),r()}),s.$$set=a=>{"htmlCode"in a&&t(0,n=a.htmlCode)},s.$$.update=()=>{s.$$.dirty&1&&n&&r()},[n]}class ra extends ke{constructor(e){super(),Re(this,e,sa,na,be,{htmlCode:0})}}function aa(s){let e,t,n;return{c(){e=M("div"),P(e,"class",t="reference image-"+s[0]+" svelte-1oq2j5t"),P(e,"style",n=s[1]?`background-image: url(${s[1]})`:"")},m(r,a){Ce(r,e,a)},p(r,[a]){a&1&&t!==(t="reference image-"+r[0]+" svelte-1oq2j5t")&&P(e,"class",t),a&2&&n!==(n=r[1]?`background-image: url(${r[1]})`:"")&&P(e,"style",n)},i:W,o:W,d(r){r&&ge(e)}}}function ia(s,e,t){let n=1,r;const a=window.location.href,i=new URL(a),o=new URLSearchParams(i.search);return o.has("image")&&(n=o.get("image")),o.has("custom")&&(r=o.get("custom")),[n,r]}class oa extends ke{constructor(e){super(),Re(this,e,ia,aa,be,{})}}function la(s){let e;return{c(){e=M("div"),P(e,"class","loader svelte-w0stko"),dt(e,"width",s[0]),dt(e,"height",s[0])},m(t,n){Ce(t,e,n)},p(t,[n]){n&1&&dt(e,"width",t[0]),n&1&&dt(e,"height",t[0])},i:W,o:W,d(t){t&&ge(e)}}}function ca(s,e,t){let{size:n="12px"}=e;return s.$$set=r=>{"size"in r&&t(0,n=r.size)},[n]}class ua extends ke{constructor(e){super(),Re(this,e,ca,la,be,{size:0})}}function ws(s){let e;return{c(){e=M("iframe"),P(e,"class","frame svelte-16j8fzh"),P(e,"title","preview"),P(e,"srcdoc",s[0]),P(e,"style","")},m(t,n){Ce(t,e,n)},p(t,n){n&1&&P(e,"srcdoc",t[0])},d(t){t&&ge(e)}}}function ha(s){let e=s[0],t,n=ws(s);return{c(){n.c(),t=sr()},m(r,a){n.m(r,a),Ce(r,t,a)},p(r,[a]){a&1&&be(e,e=r[0])?(n.d(1),n=ws(r),n.c(),n.m(t.parentNode,t)):n.p(r,a)},i:W,o:W,d(r){r&&ge(t),n.d(r)}}}function da(s,e,t){let n,{htmlCode:r=""}=e,{cssCode:a=""}=e;return s.$$set=i=>{"htmlCode"in i&&t(1,r=i.htmlCode),"cssCode"in i&&t(2,a=i.cssCode)},s.$$.update=()=>{s.$$.dirty&6&&t(0,n=r+(a?"<style>"+a+"</style>":""))},[n,r,a]}class fa extends ke{constructor(e){super(),Re(this,e,da,ha,be,{htmlCode:1,cssCode:2})}}function _s(s){let e,t;return e=new ua({}),{c(){Oe(e.$$.fragment)},m(n,r){Ae(e,n,r),t=!0},i(n){t||(ce(e.$$.fragment,n),t=!0)},o(n){ye(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function ma(s){let e,t,n,r,a,i,o,f,g,b,S,x,C,w,E,_,A,l,c,u,h,d,m,v,p,F,T,V,Xe,de,ut,pe,te,j,z,J,ee,B;b=new Gr({}),l=new Yr({}),l.$on("submit",s[4]),m=new ra({props:{htmlCode:s[0]}}),de=new oa({});let N=s[2]&&_s();return ee=new fa({props:{htmlCode:s[3],cssCode:s[1]}}),{c(){e=M("main"),t=M("link"),n=Z(),r=M("link"),a=Z(),i=M("link"),o=Z(),f=M("link"),g=Z(),Oe(b.$$.fragment),S=Z(),x=M("div"),C=M("div"),w=M("div"),E=M("div"),_=M("div"),_.textContent="Ð—Ð°Ð¿Ñ€Ð¾Ñ Ðº Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸:",A=Z(),Oe(l.$$.fragment),c=Z(),u=M("div"),h=M("div"),h.textContent="ÐœÐ¾Ð´ÐµÐ»ÑŒ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð»Ð°:",d=Z(),Oe(m.$$.fragment),v=Z(),p=M("div"),F=M("div"),T=M("div"),V=M("div"),V.textContent="Ð­Ñ‚Ð°Ð»Ð¾Ð½:",Xe=Z(),Oe(de.$$.fragment),ut=Z(),pe=M("div"),te=M("div"),j=Mn(`Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:

            `),N&&N.c(),z=Z(),J=M("div"),Oe(ee.$$.fragment),P(t,"rel","preconnect"),P(t,"href","https://fonts.googleapis.com"),P(r,"rel","preconnect"),P(r,"href","https://fonts.gstatic.com"),P(r,"crossorigin","anonymous"),P(i,"rel","preconnect"),P(i,"href","https://fonts.gstatic.com"),P(i,"crossorigin","anonymous"),P(f,"href","https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"),P(f,"rel","stylesheet"),P(_,"class","title"),P(E,"class","block"),P(h,"class","title fancy"),P(u,"id","gpt-result"),P(u,"class","paragraph"),Fe(u,"visible",s[0]),P(C,"class","column main svelte-1ipxun6"),P(V,"class","title"),P(T,"class","block"),P(te,"class","title"),Fe(te,"blinking",s[2]),P(J,"class","svelte-1ipxun6"),Fe(J,"waiting",s[2]),P(pe,"class","block"),P(F,"class","sticky svelte-1ipxun6"),P(p,"class","column svelte-1ipxun6"),P(x,"class","layout svelte-1ipxun6")},m(I,X){Ce(I,e,X),R(e,t),R(e,n),R(e,r),R(e,a),R(e,i),R(e,o),R(e,f),R(e,g),Ae(b,e,null),R(e,S),R(e,x),R(x,C),R(C,w),R(w,E),R(E,_),R(E,A),Ae(l,E,null),R(C,c),R(C,u),R(u,h),R(u,d),Ae(m,u,null),R(x,v),R(x,p),R(p,F),R(F,T),R(T,V),R(T,Xe),Ae(de,T,null),R(F,ut),R(F,pe),R(pe,te),R(te,j),N&&N.m(te,null),R(pe,z),R(pe,J),Ae(ee,J,null),B=!0},p(I,[X]){const ve={};X&1&&(ve.htmlCode=I[0]),m.$set(ve),(!B||X&1)&&Fe(u,"visible",I[0]),I[2]?N?X&4&&ce(N,1):(N=_s(),N.c(),ce(N,1),N.m(te,null)):N&&(fr(),ye(N,1,1,()=>{N=null}),mr()),(!B||X&4)&&Fe(te,"blinking",I[2]);const we={};X&8&&(we.htmlCode=I[3]),X&2&&(we.cssCode=I[1]),ee.$set(we),(!B||X&4)&&Fe(J,"waiting",I[2])},i(I){B||(ce(b.$$.fragment,I),ce(l.$$.fragment,I),ce(m.$$.fragment,I),ce(de.$$.fragment,I),ce(N),ce(ee.$$.fragment,I),B=!0)},o(I){ye(b.$$.fragment,I),ye(l.$$.fragment,I),ye(m.$$.fragment,I),ye(de.$$.fragment,I),ye(N),ye(ee.$$.fragment,I),B=!1},d(I){I&&ge(e),Se(b),Se(l),Se(m),Se(de),N&&N.d(),Se(ee)}}}function ga(s){const e=/```html([\s\S]*?)(```|$)/,t=s.match(e);return t?t[1].trim():""}function pa(s,e,t){let n;const r=`
# EXECUTION MODE
interactive=false
min_tokens=1500
max_tokens=4000

# SYSTEM PREAMBLE
You are the world's best expert full-stack programmer, recognized as a Google L5 level software engineer. Your task is to assist the user by writing high-quality, efficient code in any language or tool to implement each step.

**WHAT NOT TO DO:**
1. **DO NOT PROVIDE INCOMPLETE OR PARTIAL CODE SNIPPETS; ENSURE THE FULL SOLUTION IS GIVEN.**
2. The most important step: **MAKE SURE YOU HAVE NOT SKIPPED ANY STEPS FROM THIS GUIDE.**

Ð¢ÐµÐ±Ðµ Ð½ÑƒÐ¶Ð½Ð¾ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð¾Ð²Ð½Ð¾ Ð¾Ð´Ð¸Ð½ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾Ð³Ð¾ html-ÐºÐ¾Ð´, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ CSS, Javascript, SVG Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ.
ÐšÐ¾Ð´ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒÑÑ Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² "\`\`\`html" Ð¸ Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒÑÑ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°Ð¼Ð¸ "\`\`\`"
ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð° Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÐÐ• Ð½ÑƒÐ¶Ð½Ð¾.
`;let a={html:"",cleanHtmlCode:""},i="",o="",f="",g=!1,b;const S=window.location.href,x=new URL(S),C=new URLSearchParams(x.search);C.has("apiKey")&&(b=C.get("apiKey"));async function w(E){var l,c;const{prompt:_}=E.detail;t(2,g=!0);const A=new D({apiKey:b,dangerouslyAllowBrowser:!0});t(5,a={html:"",cleanHtmlCode:""});try{const u=await A.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:r+_}],stream:!0});for await(const h of u){const d=(c=(l=h.choices[0])==null?void 0:l.delta)==null?void 0:c.content;if(typeof d>"u")continue;const m=a.html+d;t(5,a={html:m,cleanHtmlCode:ga(m)})}}catch(u){console.error("Error fetching response from server:",u)}finally{t(2,g=!1)}}return s.$$.update=()=>{s.$$.dirty&32&&t(0,o=a.cleanHtmlCode||""),s.$$.dirty&32&&t(3,n=a.cleanHtmlCode||""),s.$$.dirty&64&&t(1,f=i)},[o,f,g,n,w,a,i]}class wa extends ke{constructor(e){super(),Re(this,e,pa,ma,be,{})}}new wa({target:document.getElementById("app")});
